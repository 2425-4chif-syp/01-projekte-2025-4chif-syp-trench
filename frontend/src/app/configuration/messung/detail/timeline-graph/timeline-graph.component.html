<div class="time-slider mb-4">
	<div class="time-slider-inner d-flex align-items-center">
		<div class="time-label start text-muted small">{{ sliderMinMs ? (sliderMinMs | date:'HH:mm:ss.SSS') : '' }}</div>

		<div class="slider-flex flex-grow-1 mx-3">
			<label class="form-label visually-hidden">Zeitpunkt</label>

            <svg class="timeline-svg" xmlns="http://www.w3.org/2000/svg" [attr.viewBox]="'0 0 ' + outerViewBoxWidth + ' ' + outerViewBoxHeight" preserveAspectRatio="xMidYMid meet"
				 (pointerdown)="onPointerDown($event)"
				 (pointermove)="onPointerMove($event)"
				 (pointerup)="onPointerUp($event)"
				 (pointerleave)="onPointerUp($event)">

				<g [attr.transform]="'translate(' + insetX + ', ' + insetY + ')'">
					<!-- transparent hit-layer to ensure pointer events register anywhere inside the region -->
					<rect x="0" y="0" [attr.width]="innerWidth" [attr.height]="innerHeight" fill="transparent" pointer-events="all"></rect>
					<!-- background rectangle spanning full width/height of inset area -->
					<rect class="bg-rect" pointer-events="none" x="0" y="0" [attr.width]="innerWidth" [attr.height]="innerHeight" rx="0" fill="#e9ecef"></rect>

                    <line pointer-events="none" [attr.x1]="lineXNormalized() * innerWidth"
                        [attr.x2]="lineXNormalized() * innerWidth"
                        y1="0" [attr.y2]="innerHeight" stroke="#007bff" stroke-width="2" vector-effect="non-scaling-stroke" />

                    @for (line of scaledLineSegments; track $index) {
                        <line [attr.x1]="line.x1" [attr.y1]="line.y1" [attr.x2]="line.x2" [attr.y2]="line.y2" pointer-events="none" stroke="black" stroke-width="2" vector-effect="non-scaling-stroke"></line>
                        <circle [attr.cx]="line.x1" [attr.cy]="line.y1" r="0.5" fill="black" pointer-events="none"></circle>
                    }
				</g>
			</svg>

			<div class="time-selected small text-muted mt-1">{{ value ? (value | date:'HH:mm:ss.SSS') : '' }}</div>
		</div>

		<div class="time-label end text-muted small">{{ sliderMaxMs ? (sliderMaxMs | date:'HH:mm:ss.SSS') : '' }}</div>
	</div>
</div>
