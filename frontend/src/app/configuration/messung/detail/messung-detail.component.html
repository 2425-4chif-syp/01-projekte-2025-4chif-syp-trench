<div class="text-center">
    <h2>Messung #{{ measurement!.id }}</h2>

    <div class="detail-actions">
        <button class="btn btn-outline-secondary btn-modern me-2" (click)="navigateBack()">
            Zurück zur Liste
        </button>
        <button class="btn btn-outline-danger btn-modern" (click)="openDeleteModal()">
            Messung löschen
        </button>
    </div>

    @if (messwerte().length < 1) {
        <p>Keine Messwerte vorhanden!</p>
    }
    @else {
        <div class="container">
            <div class="time-slider mb-4">
                <label class="form-label">Zeitpunkt: {{ selectedTime() ? (selectedTime() | date:'short') : '' }}</label>
                <input type="range"
                                class="form-range"
                                [min]="sliderMinMs"
                                [max]="sliderMaxMs"
                                [value]="sliderValue()"
                                (input)="onSliderInput($event)" />
            </div>
            <div class="auswertung-area">
                <app-messung-detail-auswertung 
                    [yokes]="yokes"
                    [yokeData]="yokeData"
                    [m_tot]="m_tot"
                    [probeType]="measurement?.messeinstellung?.probeType!"
                    [probes]="[]"
                    [coiltype]="measurement?.messeinstellung?.coil!.coiltype!"
                    [coil]="measurement?.messeinstellung?.coil!"
                    [measurementSetting]="measurement?.messeinstellung!"
                />
            </div>
        </div>
    }
</div>

<app-confirm-delete-modal
    [show]="showDeleteModal"
    title="Messung löschen?"
    message="Diese Aktion kann nicht rückgängig gemacht werden. Möchten Sie die Messung endgültig löschen?"
    (cancel)="showDeleteModal = false"
    (confirm)="confirmDeleteCurrentMessung()"
></app-confirm-delete-modal>
