# Data Package API Tests - TrenchAPI
@host = http://localhost:5127
@apiKey = ichliebetrench
@baseUrl = {{host}}

### Upload Data Package (ZIP)
# Note: You need to create a test file first, or use an existing one
POST {{baseUrl}}/api/data-package/upload
KEY: {{apiKey}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="dataPackage"; filename="test-data.zip"
Content-Type: application/zip

< ./test-data/test-package.zip
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Upload Data Package (Excel)
POST {{baseUrl}}/api/data-package/upload
KEY: {{apiKey}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="dataPackage"; filename="test-data.xlsx"
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

< ./test-data/test-package.xlsx
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Download Data Package (ZIP format)
GET {{baseUrl}}/api/data-package/download?format=zip
KEY: {{apiKey}}

### Download Data Package (7z format)
GET {{baseUrl}}/api/data-package/download?format=7z
KEY: {{apiKey}}

### Download Data Package (Excel format)
GET {{baseUrl}}/api/data-package/download?format=xlsx
KEY: {{apiKey}}

### Upload Without API Key (should fail)
POST {{baseUrl}}/api/data-package/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="dataPackage"; filename="test-data.zip"
Content-Type: application/zip

< ./test-data/test-package.zip
------WebKitFormBoundary7MA4YWxkTrZu0gW--
